(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{386:function(a,s,t){"use strict";t.r(s);var e=t(3),n=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"최신-뷰-cli의-빌드-환경-규칙"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#최신-뷰-cli의-빌드-환경-규칙"}},[a._v("#")]),a._v(" 최신 뷰 CLI의 빌드 환경 규칙")]),a._v(" "),s("p",[a._v("이번 챕터에서는 뷰 CLI 버전 3 이상에서만 적용되는 몇 가지 빌드 환경 규칙을 알아보겠습니다.")]),a._v(" "),s("h2",{attrs:{id:"애플리케이션-모드"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#애플리케이션-모드"}},[a._v("#")]),a._v(" 애플리케이션 모드")]),a._v(" "),s("p",[a._v("뷰 CLI 3에서는 다음과 같이 크게 3가지 모드가 있습니다.")]),a._v(" "),s("ul",[s("li",[s("code",[a._v("development")]),a._v(" : 프로토타이핑 및 개발 용도. "),s("code",[a._v("npm run serve")]),a._v(" 명령어로 실행할 때의 모드")]),a._v(" "),s("li",[s("code",[a._v("production")]),a._v(" : 상용화 및 배포 용도. "),s("code",[a._v("npm run build")]),a._v(" 명령어로 실행할 때의 모드")]),a._v(" "),s("li",[s("code",[a._v("test")]),a._v(" : 테스트 용도. "),s("code",[a._v("npm run test:unit")]),a._v(" 명령어로 실행할 때의 모드")])]),a._v(" "),s("p",[a._v("위의 모드는 "),s("code",[a._v("NODE_ENV")]),a._v(" 변수 값과도 연관이 있습니다. 개발 모드로 실행한 경우에는 자동으로 "),s("code",[a._v("NODE_ENV")]),a._v(" 값이 "),s("code",[a._v("development")]),a._v("로 설정이 되고, 배포 모드로 실행한 경우에는 "),s("code",[a._v("production")]),a._v("으로 설정됩니다.")]),a._v(" "),s("h2",{attrs:{id:"애플리케이션-모드에-따라-뷰-cli가-해주는-일"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#애플리케이션-모드에-따라-뷰-cli가-해주는-일"}},[a._v("#")]),a._v(" 애플리케이션 모드에 따라 뷰 CLI가 해주는 일?")]),a._v(" "),s("p",[a._v("뷰 CLI로 생성하여 애플리케이션을 제작하게 되면 기본적으로 웹팩을 사용합니다. 따라서, 모드에 따라 웹팩의 설정이 달라집니다. 예를 들면, 개발 모드일 때는 웹팩 데브 서버를 실행하기 때문에 빠르게 빌드 하면서 프로토타이핑 해나갈 수 있고 상용 모드일 때는 웹팩으로 빌드된 파일의 이름에 해쉬 값을 붙여 캐싱과 같은 이점을 누릴 수 있습니다.")]),a._v(" "),s("h2",{attrs:{id:"환경-변수-파일-규칙"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#환경-변수-파일-규칙"}},[a._v("#")]),a._v(" 환경 변수 파일 규칙")]),a._v(" "),s("p",[a._v("뷰 CLI 3에서는 프로젝트 루트 폴더에 아래와 같은 규칙으로 환경 변수 파일을 생성할 수 있습니다.")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v(".env                "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 모든 모드에 적용되는 환경 변수 파일")]),a._v("\n.env.local          "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 모든 모드에 적용되나 개인만 사용하는 파일(git에 올라가지 않음)")]),a._v("\n.env."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("mode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("         "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 특정 모드에 해당하는 환경 변수 파일")]),a._v("\n.env."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("mode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(".local   "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 특정 모드에 해당하지만 개인이 사용하는 파일(git에 올라가지 않음)")]),a._v("\n")])])]),s("p",[a._v("여기서 말하는 모드는 앞에서 살펴봤던 애플리케이션 모드를 의미합니다. 예를 들어, 상용 버전에 해당하는 환경 변수 파일은 아래와 같습니다.")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v(".env.production\n")])])]),s("h2",{attrs:{id:"환경-변수-파일-적용-순서"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#환경-변수-파일-적용-순서"}},[a._v("#")]),a._v(" 환경 변수 파일 적용 순서")]),a._v(" "),s("p",[a._v("아래와 같이 개발 환경인지 배포 환경인지에 따라 여러 개의 환경 변수 파일을 분리할 수도 있습니다.")]),a._v(" "),s("ul",[s("li",[a._v(".env")]),a._v(" "),s("li",[a._v(".env.development")]),a._v(" "),s("li",[a._v(".env.production")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# .env")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("VUE_APP_URL")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("https://domain.com\n")])])]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# .env.development")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("VUE_APP_URL")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("https://localhost:8080\n")])])]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# .env.production")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("VUE_APP_URL")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("https://123.123.123.123:9090\n")])])]),s("p",[a._v("이때 배포 모드인 "),s("code",[a._v("npm run build")]),a._v(" 명령어를 입력하게 되면 "),s("code",[a._v(".env.production")]),a._v(" 파일의 내용이 가장 높은 우선순위를 갖게 됩니다. 따라서, 애플리케이션에서 사용한 "),s("code",[a._v("VUE_APP_URL")]),a._v(" 값은 아래와 같이 설정됩니다.")]),a._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// main.js")]),a._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("VUE_APP_URL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// https://123.123.123.123:9090")]),a._v("\n")])])]),s("p",[a._v("위처럼 특정 모드에 해당하는 환경 변수의 파일의 값이 가장 높은 우선순위를 갖게 됩니다.")]),a._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[a._v("TIP")]),a._v(" "),s("p",[a._v("만약 "),s("code",[a._v(".env.development")]),a._v(", "),s("code",[a._v(".env.production")]),a._v(" 등의 파일이 없다면 "),s("code",[a._v(".env")]),a._v(" 파일에 설정한 값이 최종 값이 됩니다.")])]),a._v(" "),s("h2",{attrs:{id:"개발할-때는-로컬-환경-변수를-사용"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#개발할-때는-로컬-환경-변수를-사용"}},[a._v("#")]),a._v(" 개발할 때는 로컬 환경 변수를 사용")]),a._v(" "),s("p",[a._v("앞의 규칙들을 인지한 상태에서 팀 공용으로 사용하는 환경 변수 이외에 개인적으로 환경 변수를 설정하여 사용할 수 있습니다.")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v(".env.development "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 팀 공용 환경 변수")]),a._v("\n.env.development.local "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 개인 디버깅 또는 개발용 환경 변수")]),a._v("\n")])])]),s("p",[a._v("팀 공용으로 사용하는 애플리케이션 설정 값들은 "),s("code",[a._v(".env.development")]),a._v(" 파일에 관리하고, 개인적으로 로컬 또는 특정 서버 디버깅을 위해 "),s("code",[a._v(".env.development.local")]),a._v(" 파일에 관리하면 좋습니다.")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# .env.development")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("VUE_APP_URL")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("http://internal.server.address:8080\n")])])]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# .env.development.local")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("VUE_APP_URL")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("http://localhost:8081\n")])])]),s("p",[a._v("위와 같이 활용하는 경우 "),s("code",[a._v(".local")]),a._v(" 파일은 git에도 올라가지 않기 때문에 편하게 API 엔드포인트(URL)를 바꿔서 사용할 수 있습니다.")])])}),[],!1,null,null,null);s.default=n.exports}}]);